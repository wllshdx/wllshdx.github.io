<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Apache全家桶使用 | wllblog</title><meta name="keywords" content="Apache工具类"><meta name="author" content="wll"><meta name="copyright" content="wll"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Apache全家桶不完全使用指南平常我们在日常的开发中会一些通用的功能封装成一些工具类，以便之后复用。但是有些常用功能，业界已经存在，我们无需造轮子，只需直接使用或借用它们的 Api ，构建我们的自己项目中工具类。这篇首先介绍平常用到的 Apache 工具全家桶。  commons-lang3 commons-io commons-collections commons-codec[加密-解密]">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache全家桶使用">
<meta property="og:url" content="https://wllshdx.github.io/2021/03/20/ApacheTools/index.html">
<meta property="og:site_name" content="wllblog">
<meta property="og:description" content="Apache全家桶不完全使用指南平常我们在日常的开发中会一些通用的功能封装成一些工具类，以便之后复用。但是有些常用功能，业界已经存在，我们无需造轮子，只需直接使用或借用它们的 Api ，构建我们的自己项目中工具类。这篇首先介绍平常用到的 Apache 工具全家桶。  commons-lang3 commons-io commons-collections commons-codec[加密-解密]">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png">
<meta property="article:published_time" content="2021-03-20T08:55:19.000Z">
<meta property="article:modified_time" content="2021-03-25T03:02:24.418Z">
<meta property="article:author" content="wll">
<meta property="article:tag" content="Apache工具类">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://wllshdx.github.io/2021/03/20/ApacheTools/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: wll","link":"链接: ","source":"来源: wllblog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-25 11:02:24'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="wllblog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://wll-image.oss-cn-beijing.aliyuncs.com/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">wllblog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Apache全家桶使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-20T08:55:19.000Z" title="发表于 2021-03-20 16:55:19">2021-03-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-25T03:02:24.418Z" title="更新于 2021-03-25 11:02:24">2021-03-25</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Apache全家桶使用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Apache全家桶不完全使用指南"><a href="#Apache全家桶不完全使用指南" class="headerlink" title="Apache全家桶不完全使用指南"></a>Apache全家桶不完全使用指南</h1><p>平常我们在日常的开发中会一些通用的功能封装成一些工具类，以便之后复用。但是有些常用功能，业界已经存在，我们无需造轮子，只需直接使用或借用它们的 Api ，构建我们的自己项目中工具类。这篇首先介绍平常用到的 Apache 工具全家桶。</p>
<ul>
<li>commons-lang3</li>
<li>commons-io</li>
<li>commons-collections</li>
<li>commons-codec[加密-解密]</li>
</ul>
<p>&lt;<span id="more"></span></p>
<p><img src="https://wll-image.oss-cn-beijing.aliyuncs.com/2020042810093443.png" alt="image-20200524214713424"></p>
<h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="commons-beanutils"><a href="#commons-beanutils" class="headerlink" title="commons-beanutils"></a>commons-beanutils</h2><h3 id="BeanUtils"><a href="#BeanUtils" class="headerlink" title="BeanUtils"></a>BeanUtils</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>注意：</code>实际开发应选择 <code>Spring BeanUtils</code>，一方面不需要额外引入依赖包，另一方面性能会比Apache BeanUtils 性能好一些（同理的还有 <code>Spring StringUtils</code>）。注意，是浅拷贝</p>
<p><img src="https://wll-image.oss-cn-beijing.aliyuncs.com/2020042810093443.png" alt="在这里插入图片描述"></p>
<p>【常用API】</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 把orig对象copy到dest对象中.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyProperties</span> <span class="params">(Object dest, Object orig)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 把Bean的属性值放入到一个Map里面</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map <span class="title">describe</span><span class="params">(Object bean)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 把map里面的值放入bean中</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">populate</span> <span class="params">(Object bean, Map map)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 设置Bean对象中名称为name的属性值赋值为value.	</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProperty</span><span class="params">(Object bean,String name, Object value)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 取得bean对象中名为name的属性的值</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getProperty</span><span class="params">(Object bean, String name)</span>	</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 当需要将String数据转换成引用数据类型（自定义数据类型时），需要使用此方法实现转换。    </span></span></span><br><span class="line"><span class="function">ConvertUtils.<span class="title">register</span><span class="params">(Converter converter , ..)</span></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<p>【常见使用场景】<br>    同类之间不同对象要求进行数据复制</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User user1 = <span class="keyword">new</span> User();</span><br><span class="line">user1.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">User user2 = <span class="keyword">new</span> User();</span><br><span class="line"><span class="comment">// 把user1复制给user2</span></span><br><span class="line">BeanUtils. copyProperties(user2,user1);</span><br></pre></td></tr></table></figure>

<p>不同类不同对象之间的数据复制</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User user1 = <span class="keyword">new</span> User();</span><br><span class="line">user1.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">User user2 = <span class="keyword">new</span> User();</span><br><span class="line"><span class="comment">// 把user1复制给user2</span></span><br><span class="line">BeanUtils. copyProperties(user2,user1);</span><br></pre></td></tr></table></figure>

<p>对象数据和Map之间互相转化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="comment">// 将对象转换为Map</span></span><br><span class="line">Map userMap = BeanUtils.describe(user);</span><br><span class="line"></span><br><span class="line">Map userMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="comment">// 将Map转换为对象</span></span><br><span class="line">BeanUtils.populate(user,userMap); </span><br></pre></td></tr></table></figure>

<p>【日期类型的拷贝】</p>
<p>BeanUtils.copyProperties支持Date类型：<br>【转】<a target="_blank" rel="noopener" href="https://blog.csdn.net/adam_wzs/article/details/54092732">BeanUtils.copyProperties支持Date类型</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.ConvertUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展BeanUtils.copyProperties支持data类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanUtilsEx</span> <span class="keyword">extends</span> <span class="title">BeanUtils</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Logger logger = Logger.getLogger(BeanUtilsEx.class);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		ConvertUtils.register(<span class="keyword">new</span> DateConvert(), java.util.Date.class);</span><br><span class="line">		ConvertUtils.register(<span class="keyword">new</span> DateConvert(), String.class);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyProperties</span><span class="params">(Object target, Object source)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 支持对日期copy</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			org.apache.commons.beanutils.BeanUtils.copyProperties(target, source);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IllegalAccessException | InvocationTargetException e) &#123;</span><br><span class="line">			logger.error(<span class="string">&quot;扩展BeanUtils.copyProperties支持data类型:&quot;</span> + e.getMessage());</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.Converter;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展BeanUtils.copyProperties支持data类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateConvert</span> <span class="keyword">implements</span> <span class="title">Converter</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">convert</span><span class="params">(Class class1, Object value)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (value <span class="keyword">instanceof</span> Date) &#123;</span><br><span class="line">			<span class="keyword">return</span> value;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (value <span class="keyword">instanceof</span> Long) &#123;</span><br><span class="line">			Long longValue = (Long) value;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Date(longValue.longValue());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (value <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">			String dateStr = (String) value;</span><br><span class="line">			Date endTime = <span class="keyword">null</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				String regexp1 = <span class="string">&quot;([0-9]&#123;4&#125;)-([0-1][0-9])-([0-3][0-9])T([0-2][0-9]):([0-6][0-9]):([0-6][0-9])&quot;</span>;</span><br><span class="line">				String regexp2 = <span class="string">&quot;([0-9]&#123;4&#125;)-([0-1][0-9])-([0-3][0-9])(/t)([0-2][0-9]):([0-6][0-9]):([0-6][0-9])&quot;</span>;</span><br><span class="line">				String regexp3 = <span class="string">&quot;([0-9]&#123;4&#125;)-([0-1][0-9])-([0-3][0-9])&quot;</span>;</span><br><span class="line">				<span class="keyword">if</span> (dateStr.matches(regexp1)) &#123;</span><br><span class="line">					dateStr = dateStr.split(<span class="string">&quot;T&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot; &quot;</span> + dateStr.split(<span class="string">&quot;T&quot;</span>)[<span class="number">1</span>];</span><br><span class="line">					DateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">					endTime = sdf.parse(dateStr);</span><br><span class="line">					<span class="keyword">return</span> endTime;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (dateStr.matches(regexp2)) &#123;</span><br><span class="line">					DateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">					endTime = sdf.parse(dateStr);</span><br><span class="line">					<span class="keyword">return</span> endTime;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span> (dateStr.matches(regexp3)) &#123;</span><br><span class="line">					DateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">					endTime = sdf.parse(dateStr);</span><br><span class="line">					<span class="keyword">return</span> endTime;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> dateStr;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="commons-lang3"><a href="#commons-lang3" class="headerlink" title="commons-lang3"></a>commons-lang3</h2><p>这个包主要扩展 java.lang 下核心类的方法，提供工具类方便我们平常 java.lang 下面的类，如 String , Date。以下介绍其常用的方法。</p>
<h3 id="StringUtils"><a href="#StringUtils" class="headerlink" title="StringUtils"></a>StringUtils</h3><p>字符串相关操作，扩展 String 相关方法，可以使我们方便处理字符串，满足我们的日常使用。</p>
<p>StringUtils.isBlank || StringUtils.isEmpty 判断字符串是否为空</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 两者都可以用于判断字符串是为空 isBlank 主要用于判断空白字符串 空字符(&quot;&quot;) 以及Null 而 isEmpty 主要用于判断空字符(&quot;&quot;)以及Null</span></span><br><span class="line">StringUtils.isBlank(<span class="string">&quot; &quot;</span>)       = <span class="keyword">true</span> </span><br><span class="line">StringUtils.isEmpty(<span class="string">&quot; &quot;</span>)       = <span class="keyword">false</span></span><br></pre></td></tr></table></figure>

<p>StringUtils.countMatches 用于计数匹配上字符的数量</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">StringUtils.countMatches(<span class="string">&quot;abba&quot;</span>, <span class="string">&quot;a&quot;</span>)   = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>StringUtils.defaultIfEmpty 用于当字符串为空时，设置默认字符串</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">StringUtils.defaultIfEmpty(<span class="string">&quot;&quot;</span>, <span class="string">&quot;NULL&quot;</span>)    = <span class="string">&quot;NULL&quot;</span></span><br></pre></td></tr></table></figure>

<p>StringUtils.equalsIgnoreCase StringUtils.equals 用于判断字符串是否相等，前者忽略大小写</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">StringUtils.equals(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;abc&quot;</span>) = <span class="keyword">true</span></span><br><span class="line">StringUtils.equalsIgnoreCase(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;ABC&quot;</span>) = <span class="keyword">true</span></span><br><span class="line"><span class="comment">// 推荐使用该方法比较字符串，如果使用 a.equals(b),必须确保 a!=null</span></span><br><span class="line">StringUtils.equals(<span class="keyword">null</span>, <span class="string">&quot;abc&quot;</span>)  = <span class="keyword">false</span></span><br></pre></td></tr></table></figure>

<p>StringUtils.join 字符串连接函数，可以将字符串数组或集合，按照指定字符连接</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 碰到这种需要固定分隔符拼接的情况，可以使用该函数，以免我们写一大串函数循环拼接</span></span><br><span class="line">StringUtils.join([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>], <span class="string">&#x27;;&#x27;</span>)  = <span class="string">&quot;a;b;c&quot;</span></span><br></pre></td></tr></table></figure>

<p>StringUtils.split 说完拼接，必定会有按照固定分隔符拆分的情况</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// split 分隔后会忽略为空的字符 如果不能忽略的话 使用 splitPreserveAllTokens</span></span><br><span class="line">StringUtils.split(<span class="string">&quot;ab::ef&quot;</span>, <span class="string">&quot;:&quot;</span>) = [<span class="string">&quot;ab&quot;</span>, <span class="string">&quot;ef&quot;</span>]</span><br><span class="line">StringUtils.splitPreserveAllTokens(<span class="string">&quot;ab::ef&quot;</span>,<span class="string">&quot;:&quot;</span>)=[<span class="string">&quot;ab&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;ef&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>判断包含关系</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//判断某个字符串是否包含另外一个字符串，StringUtils中提供了过个方法，其实通过方法名就能猜到每个方法的使用方式</span></span><br><span class="line">StringUtils.contains(a,b);</span><br><span class="line">StringUtils.containsAny(a,b);</span><br><span class="line">StringUtils.containsNone(a,b);</span><br><span class="line">StringUtils.containsOnly(a,b);</span><br></pre></td></tr></table></figure>

<p>String中有方法startWith() 和 endWith() 若一个字符串为空的时候调用方法就会报空指针异常，但是使用StringUtils就可以避免</p>
<p>其它：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> StringUtils.isBlank(str);			<span class="comment">// &quot; &quot; 为 true</span></span><br><span class="line"><span class="keyword">boolean</span> StringUtils.isEmpty(str);			<span class="comment">// &quot; &quot; 为 false</span></span><br><span class="line"><span class="keyword">boolean</span> StringUtils.isNotBlank(str);</span><br><span class="line"><span class="keyword">boolean</span> StringUtils.isNotEmpty(str);</span><br><span class="line"></span><br><span class="line">String[] StringUtils.split(str,<span class="keyword">char</span>/String,max);<span class="comment">//切割字符串，使用给定字符 ;  max 主要是用来处理空内容的</span></span><br><span class="line"></span><br><span class="line">String StringUtils.capitalize(str);			<span class="comment">//首字母大写</span></span><br><span class="line">String StringUtils.uncapitalize(str);		<span class="comment">//首字母小写</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> StringUtils.isNumeric(str);</span><br><span class="line"><span class="keyword">boolean</span> StringUtils.isNumericSpace(str);	<span class="comment">// &quot;&quot; 为true &quot;12 3&quot; 为 true</span></span><br><span class="line"></span><br><span class="line">String StringUtils.join(array/Iterable,chat/String);	<span class="comment">// 类似于 js 的 join ,使用给定字符拼接数组或集合中的元素</span></span><br><span class="line"></span><br><span class="line">String StringUtils.leftPad(str,size,padChar);		<span class="comment">//给左边拼接固定长度的字符</span></span><br><span class="line">String StringUtils.rightPad(str,size,padChar);		<span class="comment">//右边拼接固定长度的字符</span></span><br><span class="line"></span><br><span class="line">​```</span><br><span class="line"></span><br><span class="line"><span class="comment">//若a为字符串，但是可能为空，那么就可能出现空指针</span></span><br><span class="line"><span class="keyword">boolean</span> rs = a.endWith(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//若使用工具类StringUtils，那么即使a为空也不会出现空指针</span></span><br><span class="line"><span class="keyword">boolean</span> rs = StringUtils.endWith(a,<span class="string">&quot;b&quot;</span>);</span><br><span class="line">​```</span><br><span class="line"></span><br><span class="line">StringUtils.replace() 将字符串中某些内容替换</span><br><span class="line"></span><br><span class="line">StringUtils.indexOf() 判断某个字符在字符串中的第一次出现的下标位置</span><br><span class="line"></span><br><span class="line">StringUtils.lastIndexOf() 判断某个字符在字符串中最后一次出现的位置</span><br></pre></td></tr></table></figure>







<h3 id="ArrayUtils"><a href="#ArrayUtils" class="headerlink" title="ArrayUtils"></a>ArrayUtils</h3><p>由于平常工作中习惯用集合代替数组对象，所以没有经常使用该类。</p>
<p>ArrayUtils.isEmpty 判断数组是否为空</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">ArrayUtils.isEmpty(a)=<span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<h3 id="DateFormatUtils"><a href="#DateFormatUtils" class="headerlink" title="DateFormatUtils"></a>DateFormatUtils</h3><p>将时间按照指定格式输出</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DateFormatUtils.format(new Date(), &quot;yyyy-MM-dd HH:mm:ss&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DateFormatUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DurationFormatUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.builder.ToStringBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.builder.ToStringStyle;</span><br><span class="line"></span><br><span class="line">DateFormatUtils.format(Date/Calendar/<span class="keyword">long</span>,pattern);</span><br><span class="line">DateFormatUtils.ISO_DATE_FORMAT.format(Date/Calendar/<span class="keyword">long</span>);		<span class="comment">// yyyy-MM-dd</span></span><br><span class="line">DateFormatUtils.ISO_TIME_NO_T_FORMAT.format(Date/Calendar/<span class="keyword">long</span>);<span class="comment">// HH:mm:ss</span></span><br><span class="line"></span><br><span class="line">DurationFormatUtils.formatDuration(<span class="keyword">long</span>,format);		<span class="comment">//格式化毫秒值为指定格式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于实体类 param,po,dto,vo</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> ToStringBuilder.reflectionToString(<span class="keyword">this</span>,ToStringStyle.SHORT_PREFIX_STYLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="DateUtils"><a href="#DateUtils" class="headerlink" title="DateUtils"></a>DateUtils</h3><p>该类可以将时间按照格式解析成 Date 类型，还可以用于时间计算</p>
<p>DateUtils.parseDate 按照格式转化成 Date 类型</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DateUtils.parseDate(<span class="string">&quot;2018-05-27 16:32:51&quot;</span>,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>) </span><br><span class="line"><span class="comment">// 将字符串转化成 Date 对象</span></span><br></pre></td></tr></table></figure>

<p>DateUtils.addDays addHours addMinutes 用于在指定 Date 加上相应时间，如想获取当前时间20天后的日期，就就可以使用 DateUtils.addDays。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Date date=DateUtils.parseDate(<span class="string">&quot;2018-05-27 16:32:51&quot;</span>,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">DateUtils.addDays(date,<span class="number">1</span>);<span class="comment">// date 为：2018-05-28 16:32:51</span></span><br><span class="line">DateUtils.addHours(date,<span class="number">1</span>)<span class="comment">// date 为：2018-05-28 17:32:51</span></span><br><span class="line">DateUtils.addMonths();  <span class="comment">//添加月</span></span><br><span class="line">DateUtils.addWeeks();   <span class="comment">//添加周</span></span><br><span class="line">DateUtils.addDays();    <span class="comment">//添加天</span></span><br><span class="line">DateUtils.addHours();   <span class="comment">//添加小时</span></span><br><span class="line">DateUtils.addMinutes(); <span class="comment">//添加分钟</span></span><br><span class="line">DateUtils.addSeconds()  <span class="comment">//添加秒</span></span><br></pre></td></tr></table></figure>

<p>DateUtils.truncate 按照指定时间类型截断时间</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Date date=DateUtils.parseDate(<span class="string">&quot;2018-05-27 16:32:51&quot;</span>,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">DateUtils.truncate(date, Calendar.DATE);<span class="comment">// 2018-05-27 00:00:00</span></span><br><span class="line">DateUtils.truncate(date, Calendar.HOUR);<span class="comment">// 2018-05-27 16:00:00</span></span><br><span class="line"><span class="comment">// 如果按照 Date 截断时间，那么 Date 后面小时，分钟等全部置为0，相当于舍弃了 Date 之后的时间。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DateUtils;</span><br><span class="line"></span><br><span class="line">Date DateUtils.parseDate(str,parsePatterns);</span><br><span class="line"><span class="keyword">boolean</span> DateUtils.isSameDay(Date,Date);			<span class="comment">//判断两个日期是否是同一天</span></span><br><span class="line"></span><br><span class="line">Date DateUtils.truncate(Date,field);			<span class="comment">//日期截取，只取指定日期字段的值</span></span><br><span class="line">Date DateUtils.round(Date,field);				<span class="comment">// 日期四舍五入，和 truncate 的区别是 如果用 YEAR 当前时间是 2019-08-18 truncate 的值还是 2019 ，但 round 会得到 2020 </span></span><br><span class="line"></span><br><span class="line">Date DateUtils.addDays(Date,amount);			<span class="comment">//增加一天,这个不会修改原来的日期值</span></span><br><span class="line">还有 addYears,addMonths,addWeeks,addHours,addMinutes,addSeconds,addMilliseconds</span><br><span class="line"></span><br><span class="line">Date DateUtils.setDays(Date,amount);			<span class="comment">//设置为本月的第几天</span></span><br><span class="line">还有 setYears,setMonths,setHours,setMinutes,setSeconds,setMilliseconds</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">计算已过去的天数，从哪儿开始算呢，根据第2个参数fragment来确定，</span></span><br><span class="line"><span class="comment">如现在是2014-10-23 13:27:00，那么</span></span><br><span class="line"><span class="comment">DateUtils.getFragmentInDays(new Date(), Calendar.MONTH)返回23，表示从当月起已经过去23天了，</span></span><br><span class="line"><span class="comment">DateUtils.getFragmentInDays(new Date(), Calendar.YEAR)返回296，表示从当年起已经过去296天了，</span></span><br><span class="line"><span class="comment">DateUtils.getFragmentInHours(new Date(), Calendar.DATE)返回13，表示从今天起已经过去13个小时了</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">long</span> DateUtils.getFragmentInDays(Date,fragment);	<span class="comment">//计算已经过去的天数</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>DateUtils工具类还提供了将日期Date转换成日历的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Calendar calendar = DateUtils.toCalendar(date);</span><br></pre></td></tr></table></figure>





<h3 id="NumberUtils"><a href="#NumberUtils" class="headerlink" title="NumberUtils"></a>NumberUtils</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.math.NumberUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> NumberUtils.toInt(String);</span><br><span class="line">还有 toLong,toDouble,toFloat,toShort 等</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> NumberUtils.isDigits(String);		<span class="comment">//判断是否全由数字组成 &quot;&quot; 为 false</span></span><br><span class="line"><span class="keyword">boolean</span> NumberUtils.isNumber(String);		<span class="comment">// 支持 0x 类的表达形式</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="增强反射处理"><a href="#增强反射处理" class="headerlink" title="增强反射处理"></a>增强反射处理</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.ClassUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.reflect.MethodUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.core.ReflectUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ReflectionUtils;</span><br><span class="line"></span><br><span class="line">Class&lt;?&gt; ClassUtils.getClass(className);</span><br><span class="line"><span class="keyword">boolean</span> ClassUtils.isInnerClass(Class&lt;?&gt;);			<span class="comment">//是否是内部类</span></span><br><span class="line"><span class="keyword">boolean</span> ClassUtils.isPrimitiveOrWrapper(Class&lt;?&gt;);	<span class="comment">//判断是否是原始类型或原始类型的包装类</span></span><br><span class="line"></span><br><span class="line">List&lt;Method&gt; MethodUtils.getMethodsListWithAnnotation( Class&lt;?&gt;, Class&lt;? extends Annotation&gt;);</span><br><span class="line">Method ReflectionUtils.findMethod(Class&lt;?&gt; clazz,methodName, Class&lt;?&gt;...);</span><br><span class="line">PropertyDescriptor[] ReflectUtils.getBeanGetters(Class type);</span><br><span class="line"></span><br><span class="line">Object MethodUtils.invokeMethod(object,methodName,args[],values[]);	<span class="comment">//调用方法</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="随机数生成"><a href="#随机数生成" class="headerlink" title="随机数生成"></a>随机数生成</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.RandomUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.RandomStringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> RandomUtils.nextInt(start,end);</span><br><span class="line"><span class="keyword">long</span> RandomUtils.nextLong(start,end);</span><br><span class="line"></span><br><span class="line">String RandomStringUtils.randomNumeric(count);</span><br><span class="line">String RandomStringUtils.randomAlphabetic(count);</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="commons-io"><a href="#commons-io" class="headerlink" title="commons-io"></a>commons-io</h2><blockquote>
<p>Commons IO is a library of utilities to assist with developing IO functionality.</p>
</blockquote>
<p>主要包含一些 IO 相关的工具类,可以简化处理文件相关操作</p>
<h3 id="FileUtils"><a href="#FileUtils" class="headerlink" title="FileUtils"></a>FileUtils</h3><p>文件操作相关工具类</p>
<p>FileUtils.copyDirectory || FileUtils.copyFile 拷贝文件夹或文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 拷贝文件</span><br><span class="line">File fileA &#x3D; new File(&quot;E:\\test\\test.txt&quot;);</span><br><span class="line">File fileB &#x3D; new File(&quot;E:\\test1\\test.txt&quot;);</span><br><span class="line">FileUtils.copyFile(fileA,fileB);</span><br></pre></td></tr></table></figure>

<p>FileUtils.listFiles 获取指定文件夹上所有文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 按照指定文件后缀如java,txt等去查找指定文件夹的文件</span><br><span class="line">File directory &#x3D; new File(&quot;E:\\test&quot;);</span><br><span class="line">FileUtils.listFiles(directory, new String[]&#123;&quot;txt&quot;&#125;, false);</span><br></pre></td></tr></table></figure>

<p>FileUtils.readLines 读取文件所有行</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读取指定文件所有行 不需要使用 while 循环读取流了</span></span><br><span class="line">List&lt;String&gt; lines = FileUtils.readLines(fileA)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//读取文件返回读取的内容字符串，另一个重载的方法可以设置编码</span></span><br><span class="line">        String context = FileUtils.readFileToString(file);</span><br><span class="line">        String context = FileUtils.readFileToString(file,encoding);</span><br><span class="line">       </span><br><span class="line"><span class="comment">//读取文件返回字节数组</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = FileUtils.readFileToByteArray(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取文件返回流</span></span><br><span class="line">        FileInputStream fileInputStream = FileUtils.openInputStream(file);</span><br><span class="line">        FileOutputStream fileOutputStream = FileUtils.openOutputStream(file);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//既然有读取文件内容的方法那么必然也有写的方法</span></span><br><span class="line">       FileUtils.writeStringToFile(file,data);</span><br><span class="line">       FileUtils.writeStringToFile(file,data,encoding);</span><br></pre></td></tr></table></figure>

<p>FileUtils.writeLines 有读就存在写，该方法可以一行行写入文本</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以一行行写入文本</span></span><br><span class="line">List&lt;String&gt; lines = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">.....</span><br><span class="line">FileUtils.writeLines(lines)</span><br></pre></td></tr></table></figure>

<p>其它：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FilenameUtils;</span><br><span class="line"></span><br><span class="line">String IOUtils.toString(InputStream,encoding);			<span class="comment">//文本文件流读出字符串</span></span><br><span class="line">List&lt;String&gt; IOUtils.readLines(InputStream,encoding);	<span class="comment">//文本文件读出 List&lt;String&gt;</span></span><br><span class="line"><span class="keyword">int</span> IOUtils.copy(InputStream, OutputStream);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> FileUtils.writeStringToFile(File, String, Charset);</span><br><span class="line"><span class="keyword">void</span> FileUtils.deleteDirectory(File);</span><br><span class="line"></span><br><span class="line">String FilenameUtils.getBaseName(filename);			<span class="comment">//获取文件名</span></span><br><span class="line">String FilenameUtils.getExtension(filename);		<span class="comment">//获取扩展名</span></span><br><span class="line">String FilenameUtils.separatorsToUnix(String path);	<span class="comment">//转成 linux 路径分隔符</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>删除文件或目录<br>FileUtils提供了删除文件或目录的方法，比如要清空某个文件目录下的所有内容，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//清空目录objective下的所有内容，但是不删除objective目录</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;G:\\objective&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    FileUtils.cleanDirectory(<span class="keyword">new</span> File(<span class="string">&quot;G:\\objective&quot;</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>与cleanDirectory()方法不同的还有一个删除目录的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//删除目录objective以及子目录子文件,即G盘下没有了objective目录</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;G:\\objective&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    FileUtils.deleteDirectory(file);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h3 id="IOUtils"><a href="#IOUtils" class="headerlink" title="IOUtils"></a>IOUtils</h3><p>Io 操作相关，FileUtils 很多方法底层调用的是该类的方法</p>
<p>IOUtils.toString 将输入流转化为指定编码格式的字符串，该方法非常使用与 http 异步回调的场景</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 获取 http 异步回调的报文</span><br><span class="line">String resMsg &#x3D; IOUtils.toString(request.getInputStream());</span><br></pre></td></tr></table></figure>

<p>IOUtils.toByteArray 将输入流转化为 byte 数组</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 获取 http 异步回调的报文</span><br><span class="line">byte[] b &#x3D; IOUtils.toByteArray(request.getInputStream());</span><br></pre></td></tr></table></figure>

<p>IOUtils.closeQuietly 关闭流，不需要在关闭前写判断和try-catch语句，commons-io 2.6 该方法已被 <strong>Deprecated</strong> ， 官方推荐使用 JDK7 try-with-resources 关闭。<strong>注：</strong> <em>该方法如果在输入流等 close 时，若产生 Exception ，异常将会被该方法吞掉。</em></p>
<p>IOUtils是对流的操作，我们常常操作文件的时候就使用io流，所以上面FileUtils提到的文件复制也可以使用IOUtils实现，只是IOUtils是对文件流进行操作。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;IOUtils有多个重载的copy()方法，返回复制的字节数，示例如下：</span><br><span class="line">File srcFile &#x3D; new File(&quot;G:\\original\\src\\test - 副本.txt&quot;);</span><br><span class="line">File destFile &#x3D; new File(&quot;G:\\objective\\desc\\copy.txt&quot;);</span><br><span class="line">try &#123;</span><br><span class="line">    FileInputStream fileInputStream &#x3D; FileUtils.openInputStream(srcFile);</span><br><span class="line">    FileOutputStream fileOutputStream &#x3D; FileUtils.openOutputStream(destFile);</span><br><span class="line">    int copy &#x3D; IOUtils.copy(fileInputStream, fileOutputStream);</span><br><span class="line">    System.out.println(copy);</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;copy方法</span><br><span class="line">copy(InputStream input, OutputStream output)</span><br><span class="line">copy(InputStream input, Writer output)</span><br><span class="line">copy(InputStream input, Writer output, String encoding)</span><br><span class="line">copy(Reader input, Writer output)</span><br><span class="line">copy(Reader input, OutputStream output)</span><br><span class="line">copy(Reader input, OutputStream output, String encoding)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>IOUtils还提供了两个重载的方法，用于判断两个流的内容是否相同，比如读取两个文件返回了流，那么想要判断两个文件的内容是否相同，那么可以使用IOUtils提供的方法</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FileInputStream fileInputStream1 &#x3D; FileUtils.openInputStream(destFile);</span><br><span class="line">FileInputStream fileInputStream2 &#x3D; FileUtils.openInputStream(destFile1);</span><br><span class="line">boolean b &#x3D; IOUtils.contentEquals(fileInputStream1, fileInputStream);</span><br><span class="line">System.out.println(b);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;重载的方法</span><br><span class="line">contentEquals(Reader input1, Reader input2)</span><br></pre></td></tr></table></figure>







<h3 id="FilenameUtils"><a href="#FilenameUtils" class="headerlink" title="FilenameUtils"></a>FilenameUtils</h3><p>在处理一些文件路径问题时，如果我们代码开发在 Windows 平台，部署却是在 Linux 平台，这个时候我们必须考虑平台分隔符问题。FilenameUtils 解决了平台问题，不用担心平台系统问题，导致的bug。</p>
<p>FilenameUtils.getBaseName 获取文件名字，去除前缀加扩展名 FilenameUtils.getExtension 获取文件扩展名，去除路径以及文件名 FilenameUtils.getName 获取文件全名，去除路径</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FilenameUtils.getBaseName(&quot;E:\\test\\test.txt&quot;)&#x2F;&#x2F;test</span><br><span class="line">FilenameUtils.getExtension(&quot;E:\\test\\test.txt&quot;)&#x2F;&#x2F;txt</span><br><span class="line">FilenameUtils.getName(&quot;E:\\test\\test.txt&quot;)&#x2F;&#x2F; test.txt</span><br></pre></td></tr></table></figure>

<p>FilenameUtils.concat 文件路径拼接，不用担心文件的分隔符</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FilenameUtils.concat(&quot;E:\\test&quot;, &quot;test.txt&quot;);&#x2F;&#x2F;E:\test\test.txt</span><br></pre></td></tr></table></figure>

<h2 id="commons-collections"><a href="#commons-collections" class="headerlink" title="commons-collections"></a>commons-collections</h2><blockquote>
<p>The Java Collections Framework was a major addition in JDK 1.2. It added many powerful data structures that accelerate development of most significant Java applications. Since that time it has become the recognised standard for collection handling in Java</p>
</blockquote>
<p>commons-collections 主要增强 java Collections 功能</p>
<h3 id="CollectionUtils"><a href="#CollectionUtils" class="headerlink" title="CollectionUtils"></a>CollectionUtils</h3><p>为 Collection 实例提供工具方法</p>
<p>CollectionUtils.addAll 可以将数组，集合加入到指定集合，解决需要将数组加入到集合中情况</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; listA &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">listA.add(&quot;1&quot;);</span><br><span class="line">listA.add(&quot;2&quot;);</span><br><span class="line">listA.add(&quot;3&quot;);</span><br><span class="line">String[] arrays &#x3D; new String[]&#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;&#125;;</span><br><span class="line">CollectionUtils.addAll(listA, arrays);</span><br></pre></td></tr></table></figure>

<p>CollectionUtils.isEmpty CollectionUtils.isNotEmpty 快捷判断集合是否为空</p>
<p><strong>集合和数组的处理</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.ArrayUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.CollectionUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> ArrayUtils.isEmpty(Array);</span><br><span class="line"><span class="keyword">boolean</span> ArrayUtils.isNotEmpty(Array);</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> CollectionUtils.isEmpty(Collection);</span><br><span class="line"><span class="keyword">boolean</span> CollectionUtils.isNotEmpty(Collection);</span><br><span class="line">Collection CollectionUtils.union(a,b);			<span class="comment">//并集</span></span><br><span class="line">Collection CollectionUtils.intersection(a,b);	<span class="comment">//交集</span></span><br><span class="line">Collection CollectionUtils.disjunction(a,b);	<span class="comment">//补集</span></span><br><span class="line">Collection CollectionUtils.subtract(a,b);		<span class="comment">//差集</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>判断两个集合是否有相同的元素</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//判断两个集合如果有相同的元素返回true，反之返回false</span></span><br><span class="line"><span class="keyword">boolean</span> b = CollectionUtils.containsAny(list, list2);</span><br></pre></td></tr></table></figure>

<p>将数组转换成list集合</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//平常在代码中将数组转换成list可能常用的java.util包 Arrays.asList()</span></span><br><span class="line">List&lt;String&gt; list = Arrays.asList(arr);</span><br><span class="line"></span><br><span class="line"><span class="comment">//CollectionUtils工具类也提供了将诉数组转换成list，返回的list是没有泛型的</span></span><br><span class="line">List list = CollectionUtils.arrayToList(arr);</span><br></pre></td></tr></table></figure>

<p>获取集合list 或者 set 的最后一个元素</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;我们如果想要获取list的最后一个元素的话可以使用下标，因为list的有序的</span><br><span class="line">String last &#x3D; list.get(list.size() - 1);</span><br><span class="line">&#x2F;&#x2F;但是如果要获取set集合的最后一个元素就比较麻烦，set的无序的没有下标，但是可以使用CollectionUtils工具类</span><br><span class="line">String last &#x3D; CollectionUtils.lastElement(set);</span><br></pre></td></tr></table></figure>









<h2 id="commons-codec"><a href="#commons-codec" class="headerlink" title="commons-codec"></a>commons-codec</h2><h3 id="加解密相关"><a href="#加解密相关" class="headerlink" title="加解密相关"></a><strong>加解密相关</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Hex;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.digest.DigestUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span>[] Base64.encodeBase64(<span class="keyword">byte</span> []);</span><br><span class="line"><span class="keyword">byte</span>[] Base64.decodeBase64(<span class="keyword">byte</span>[]);</span><br><span class="line"></span><br><span class="line">Base64 base64 = <span class="keyword">new</span> Base64();</span><br><span class="line">String text = <span class="string">&quot;字串文字&quot;</span>;</span><br><span class="line"><span class="comment">//编码</span></span><br><span class="line">String encodedText = base64.encodeToString(text.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"><span class="comment">//解码</span></span><br><span class="line">System.out.println(<span class="keyword">new</span> String(base64.decode(encodedText), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> [] Hex.encodeHex(<span class="keyword">byte</span> []);</span><br><span class="line"><span class="keyword">byte</span> [] Hex.decodeHex(<span class="keyword">char</span> []);</span><br><span class="line"></span><br><span class="line">String DigestUtils.md5Hex(String);</span><br><span class="line">String DigestUtils.shaHex(String);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>与Spring Boot的摘要算法区别</p>
<h2 id="HttpClient"><a href="#HttpClient" class="headerlink" title="HttpClient"></a>HttpClient</h2><p>HttpClient是 Apache Jakarta Common 下的子项目，用来提供高效的、最新的、功能丰富的支持 HTTP 协议的客户端编程工具包，并且它支持 HTTP 协议最新的版本和建议。实现了所有 HTTP 的方法（GET,POST,PUT,HEAD 等）。以下是一个简单的Http请求使用GET方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="comment">//客户端</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建httpClient实例</span></span><br><span class="line">        HttpClient httpClient = <span class="keyword">new</span> HttpClient();</span><br><span class="line">        <span class="comment">//创建一个GET方法</span></span><br><span class="line">        GetMethod getMethod = <span class="keyword">new</span> GetMethod(<span class="string">&quot;http://ip:port/MySpringBootDemo/api/test&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//发起get请求</span></span><br><span class="line">            <span class="keyword">int</span> code = httpClient.executeMethod(getMethod);</span><br><span class="line">            <span class="keyword">if</span> (code != HttpStatus.SC_OK)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请求异常&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">byte</span>[] responseBody = getMethod.getResponseBody();</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(responseBody,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//释放连接</span></span><br><span class="line">            getMethod.releaseConnection();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">............................................................................................................</span><br><span class="line"><span class="comment">//服务端</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigurationApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;test&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getNpws</span><span class="params">(HttpServletResponse response)</span></span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">&quot;G:\\objective\\desc\\copy.txt&quot;</span>);</span><br><span class="line">        getFile(response,file);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getFile</span><span class="params">(HttpServletResponse response,File file)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">                OutputStream output = response.getOutputStream();</span><br><span class="line">                FileInputStream input = <span class="keyword">new</span> FileInputStream(file)</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] bts = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>((len=input.read(bts))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                output.write(bts,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>HttpClient可以设置一些参数，使用HttpClientParams</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//HttpClient设置参数</span></span><br><span class="line">httpClient.setParams(httpClientParams);</span><br><span class="line"></span><br><span class="line">HttpClientParams httpClientParams = <span class="keyword">new</span> HttpClientParams();</span><br><span class="line"><span class="comment">//设置连接超时时间，单位是毫秒</span></span><br><span class="line">httpClientParams.setConnectionManagerTimeout(<span class="keyword">long</span> timeout);</span><br><span class="line"><span class="comment">//设置是否先尝试身份验证</span></span><br><span class="line">setAuthenticationPreemptive(<span class="keyword">boolean</span> value)</span><br><span class="line"><span class="comment">//设置字符集</span></span><br><span class="line">setContentCharset(String charset)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>GetMethod</strong></li>
</ul>
<p>上面的示例中用到了GetMethod，从名称上能猜到这个类是发起GET请求的，那么它可能会提供一些get请求的配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;设置请求头,这个方法会覆盖原来的请求头</span><br><span class="line">setRequestHeader(Header header)</span><br><span class="line">    </span><br><span class="line">&#x2F;&#x2F;添加请求头，这个方法只是添加不会重写原来的请求头</span><br><span class="line">addRequestHeader(Header header)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;请求头的创建可以使用无参构造函数，然后通过Header的两个方法设置参数,请求头是键值对key，value形式的，如:</span><br><span class="line">Hearder header &#x3D; new Header();</span><br><span class="line">header.setName(&quot;appToken&quot;);</span><br><span class="line">header.setValue(&quot;adfdf&quot;);</span><br><span class="line">&#x2F;&#x2F;也可以通过有参构造函数直接创建</span><br><span class="line">Header header &#x3D; new Header(&quot;appToken&quot;,&quot;adfdf&quot;);</span><br></pre></td></tr></table></figure>



<p>请求类似IO流不能一直保持着，当请求完毕后要释放连接</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;当响应处理完毕后要断开连接</span><br><span class="line">releaseConnection();</span><br><span class="line">PostMethod</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>http请求一般使用最多的就是get和post请求，下面我们看看PostMethod，其实和GetMethod类似</p>
<pre><code>public static void main(String[] args) &#123;
    //创建HttpClient实例
    HttpClient httpClient = new HttpClient();
    String url = &quot;http://192.168.0.115:8899/MySpringBootDemo/api/npws&quot;;
    PostMethod postMethod = new PostMethod(url);
    //添加请求参数
    postMethod.setParameter(&quot;ajbh&quot;,&quot;123&quot;);
    
    Header header = new Header();
    header.setName(&quot;token&quot;);
    header.setValue(&quot;adfg&quot;);
    //设置请求头
    postMethod.setRequestHeader(header);

    try &#123;
        int code = httpClient.executeMethod(postMethod);
        if (code != HttpStatus.SC_OK)&#123;
            System.out.println(&quot;请求异常&quot;);
        &#125;
        byte[] responseBody = postMethod.getResponseBody();
        System.out.println(new String(responseBody));
    &#125; catch (IOException e) &#123;
        e.printStackTrace();
    &#125;finally&#123;
         postMethod.releaseConnection();
    &#125;

&#125;
</code></pre>
<p>}<br>一般我们使用post请求消息类型会选择json格式的，PostMethod通过RequestEntity可以设置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//RequestEntity是一个接口，它有多个实现类分别是：</span></span><br><span class="line"><span class="comment">//StringRequestEntity; ByteArrayRequestEntity; FileRequestEntity; InputStreamRequestEntity; MultipartRequestEntity</span></span><br><span class="line"></span><br><span class="line">JSONObject jsonObject = <span class="keyword">new</span> JSONObject();</span><br><span class="line">RequestEntity requestEntity = <span class="keyword">new</span> StringRequestEntity(jsonObject.toString(),<span class="string">&quot;application/json&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">postMethod.setRequestEntity(requestEntity);</span><br></pre></td></tr></table></figure>

<h2 id="HttpURLConnection"><a href="#HttpURLConnection" class="headerlink" title="HttpURLConnection"></a>HttpURLConnection</h2><p>Apache commons 包中有一个工具类HttpURLConnection，它是java.net.HttpURLConnection的子类，Apache commons中的HttpURLConnection的方法都是不可用的，其实我们一般使用的都使用java.net.HttpURLConnection，所以下面的示例也是java.net.HttpURLConnection</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//要请求的ip和端口</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String ruleManagerServerUrl = <span class="string">&quot;http://ip:端口&quot;</span>; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取当前服务器地址</span></span><br><span class="line">            String localAddr = InetAddress.getLocalHost().getHostAddress();</span><br><span class="line">            JSONObject obj = <span class="keyword">new</span> JSONObject();</span><br><span class="line">            obj.put(<span class="string">&quot;ip&quot;</span>, localAddr);</span><br><span class="line">            obj.put(<span class="string">&quot;port&quot;</span>, <span class="string">&quot;8080&quot;</span>);</span><br><span class="line">            URL url = <span class="keyword">new</span> URL(ruleManagerServerUrl + <span class="string">&quot;/api/addHost&quot;</span>);</span><br><span class="line">            HttpURLConnection connection = (HttpURLConnection)url.openConnection();</span><br><span class="line">            connection.setConnectTimeout(<span class="number">3000</span>);</span><br><span class="line">            connection.setRequestMethod(<span class="string">&quot;POST&quot;</span>);</span><br><span class="line">            connection.setDoOutput(<span class="keyword">true</span>);</span><br><span class="line">            connection.setDoInput(<span class="keyword">true</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">&quot;Connection&quot;</span>, <span class="string">&quot;Keep-Alive&quot;</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">&quot;Charset&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">            String s = obj.toJSONString();</span><br><span class="line">            <span class="keyword">byte</span>[] writebytes = s.getBytes(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">&quot;Content-Length&quot;</span>, String.valueOf(writebytes.length));</span><br><span class="line">            OutputStream out = connection.getOutputStream();</span><br><span class="line">            out.write(writebytes);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">200</span> == connection.getResponseCode()) &#123;</span><br><span class="line">                String message = connection.getResponseMessage();</span><br><span class="line">                <span class="keyword">if</span> (StringUtils.equals(<span class="string">&quot;添加服务器名称失败&quot;</span>, message)) &#123;</span><br><span class="line">                    logger.warn(<span class="string">&quot;添加服务器名称失败&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception var9) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;请求失败&quot;</span>, var9);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h2><h3 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h3><p>平常开发中总会遇到加密的情况，比如登录的用户名和密码会通过加密后存储到数据库中，其实就是将实际的用户名和密码通过另外一种算法进行编码，隐藏了真正的内容，还有就是文本存储到数据库中的时候文本内容太大，那么就可以对文本内容进行编码比如Base64后存储到数据库中。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">&quot;程序员&quot;</span>;</span><br><span class="line">        Base64 base64 = <span class="keyword">new</span> Base64();</span><br><span class="line">        String base64Str ;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//Base64编码</span></span><br><span class="line">             base64Str = base64.encodeToString(str.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(base64Str);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            logger.error(<span class="string">&quot;文本Base64编码异常&quot;</span>,e);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> 结果：56iL5bqP5ZGY</span><br><span class="line">............................................................................................................</span><br><span class="line">        <span class="comment">//Base64解码</span></span><br><span class="line">        <span class="keyword">byte</span>[] decode = base64.decode(base64Str);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">     </span><br><span class="line">            String rs = <span class="keyword">new</span> String(decode,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            System.out.println(rs);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            logger.error(<span class="string">&quot;文本解码异常&quot;</span>,e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">结果：程序员</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>java.Util包中也有Base64</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">&quot;程序员&quot;</span>;</span><br><span class="line">        String base64Str;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//Base64编码</span></span><br><span class="line">            <span class="keyword">byte</span>[] encode = Base64.getEncoder().encode(str.getBytes(<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">            base64Str = <span class="keyword">new</span> String(encode,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            System.out.println(base64Str);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">             logger.error(<span class="string">&quot;Base64编码异常&quot;</span>,e);</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       <span class="comment">//Base64解码</span></span><br><span class="line">        <span class="keyword">byte</span>[] decode = Base64.getDecoder().decode(base64Str);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String rs = <span class="keyword">new</span> String(decode,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            System.out.println(rs);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">           logger.error(<span class="string">&quot;Base64解码异常&quot;</span>,e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="DigestUtils"><a href="#DigestUtils" class="headerlink" title="DigestUtils"></a>DigestUtils</h3><p>DigestUtils是一个加密工具类，有各种加密的方法，但是我们常用到的是md5加密。当我们不知道这个工具类的时候想要对一段文字加密的时候会自己写md5加密算法，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5Util</span> </span>&#123;</span><br><span class="line">    <span class="comment">//第一种实现</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String string = <span class="string">&quot;程序员&quot;</span>;</span><br><span class="line">        <span class="keyword">char</span>[] hexDigits=&#123;<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;F&#x27;</span>&#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] btInput = string.getBytes();</span><br><span class="line">            <span class="comment">// 获得MD5摘要算法的 MessageDigest 对象</span></span><br><span class="line">            MessageDigest mdInst = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            <span class="comment">// 使用指定的字节更新摘要</span></span><br><span class="line">            mdInst.update(btInput);</span><br><span class="line">            <span class="comment">// 获得密文</span></span><br><span class="line">            <span class="keyword">byte</span>[] md = mdInst.digest();</span><br><span class="line">            <span class="comment">// 把密文转换成十六进制的字符串形式</span></span><br><span class="line">            <span class="keyword">int</span> j = md.length;</span><br><span class="line">            <span class="keyword">char</span>[] str = <span class="keyword">new</span> <span class="keyword">char</span>[j * <span class="number">2</span>];</span><br><span class="line">            <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">                <span class="keyword">byte</span> byte0 = md[i];</span><br><span class="line">                str[k++] = hexDigits[byte0 &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">                str[k++] = hexDigits[byte0 &amp; <span class="number">0xf</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">结果：72D9ADF4944F23E5EFDE37F6364C126F</span><br><span class="line">............................................................................................................</span><br><span class="line">    <span class="comment">//第二种实现</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       String string = <span class="string">&quot;程序员&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest md5 = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            md5.update(string.getBytes());</span><br><span class="line">            <span class="keyword">byte</span>[] b = md5.digest();</span><br><span class="line"></span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; b.length; n++) &#123;</span><br><span class="line">                <span class="keyword">int</span> i = b[n];</span><br><span class="line">                <span class="keyword">if</span> (i &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                    i += <span class="number">256</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; <span class="number">16</span>) &#123;</span><br><span class="line">                    sb.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                sb.append(Integer.toHexString(i));</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(sb.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">结果：72d9adf4944f23e5efde37f6364c126f</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>以上不论哪一种方法都需要大段的代码，如果项目中多处使用，还需要封装成一个工具类，其实Apache commons中已经有封装好的工具类，使用很方便，一行代码解决问题</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = DigestUtils.md5Hex(string);</span><br><span class="line">System.out.println(s);</span><br><span class="line">结果：72d9adf4944f23e5efde37f6364c126f</span><br><span class="line"></span><br><span class="line"><span class="comment">//当然工具类DigestUtils还提供了其他的md5加密方法</span></span><br><span class="line"><span class="comment">//加密字节数组</span></span><br><span class="line">DigestUtils.md5Hex(<span class="keyword">byte</span>[]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//加密流的</span></span><br><span class="line">DigestUtils.md5Hex(inputStream);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="文件压缩zip"><a href="#文件压缩zip" class="headerlink" title="文件压缩zip"></a>文件压缩zip</h2><p>zip普通方法压缩文件夹</p>
<p>方法1：压缩文件夹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>  BUFFER_SIZE = <span class="number">2</span> * <span class="number">1024</span>;</span><br><span class="line">    <span class="comment">//主函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//压缩文件名称</span></span><br><span class="line">            File file = <span class="keyword">new</span> File(<span class="string">&quot;G:\\original.zip&quot;</span>);</span><br><span class="line">            <span class="comment">//创建文件输出流</span></span><br><span class="line">            FileOutputStream fileOutputStream = FileUtils.openOutputStream(file);</span><br><span class="line">            <span class="comment">//压缩文件</span></span><br><span class="line">            toZip(<span class="string">&quot;G:\\original&quot;</span>,fileOutputStream,<span class="keyword">true</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;压缩文件异常&quot;</span>,e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 压缩成ZIP </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcDir 压缩文件夹路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out    压缩文件输出流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keepDirStructure  是否保留原来的目录结构(true:保留目录结构;false:所有文件跑到压缩包根目录下)</span></span><br><span class="line"><span class="comment">     *                          (注意：不保留目录结构可能会出现同名文件,会压缩失败)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> RuntimeException 压缩失败会抛出运行时异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">toZip</span><span class="params">(String srcDir, OutputStream out, <span class="keyword">boolean</span> keepDirStructure)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> RuntimeException</span>&#123;</span><br><span class="line">        <span class="comment">//记录压缩开始时间</span></span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//创建zip输出流</span></span><br><span class="line">        <span class="keyword">try</span> (ZipOutputStream zos = <span class="keyword">new</span> ZipOutputStream(out))&#123;</span><br><span class="line">            File sourceFile = <span class="keyword">new</span> File(srcDir);</span><br><span class="line">            compress(sourceFile,zos,sourceFile.getName(),keepDirStructure);</span><br><span class="line">            <span class="comment">//记录压缩结束时间</span></span><br><span class="line">            <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">            System.out.println(<span class="string">&quot;压缩完成，耗时：&quot;</span> + (end - start) +<span class="string">&quot; ms&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;压缩文件&#123;&#125;异常&quot;</span>,srcDir,e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 递归压缩方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sourceFile 源文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> zos        zip输出流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name       压缩后的名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keepDirStructure  是否保留原来的目录结构(true:保留目录结构;false:所有文件跑到压缩包根目录下)</span></span><br><span class="line"><span class="comment">     *                          (注意：不保留目录结构可能会出现同名文件,会压缩失败)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">compress</span><span class="params">(File sourceFile, ZipOutputStream zos, String name,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 <span class="keyword">boolean</span> keepDirStructure)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[BUFFER_SIZE];</span><br><span class="line">        <span class="keyword">if</span>(sourceFile.isFile())&#123;</span><br><span class="line">            <span class="comment">// 向zip输出流中添加一个zip实体，构造器中name为zip实体的文件的名字</span></span><br><span class="line">            zos.putNextEntry(<span class="keyword">new</span> ZipEntry(name));</span><br><span class="line">            <span class="comment">// copy文件到zip输出流中</span></span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            FileInputStream in = <span class="keyword">new</span> FileInputStream(sourceFile);</span><br><span class="line">            <span class="keyword">while</span> ((len = in.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                zos.write(buf, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            zos.closeEntry();</span><br><span class="line">            in.close();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            File[] listFiles = sourceFile.listFiles();</span><br><span class="line">            <span class="keyword">if</span>(listFiles == <span class="keyword">null</span> || listFiles.length == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">// 需要保留原来的文件结构时,需要对空文件夹进行处理</span></span><br><span class="line">                <span class="keyword">if</span>(keepDirStructure)&#123;</span><br><span class="line">                    <span class="comment">// 空文件夹的处理</span></span><br><span class="line">                    zos.putNextEntry(<span class="keyword">new</span> ZipEntry(name + <span class="string">&quot;/&quot;</span>));</span><br><span class="line">                    <span class="comment">// 没有文件，不需要文件的copy</span></span><br><span class="line">                    zos.closeEntry();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (File file : listFiles) &#123;</span><br><span class="line">                    <span class="comment">// 判断是否需要保留原来的文件结构</span></span><br><span class="line">                    <span class="keyword">if</span> (keepDirStructure) &#123;</span><br><span class="line">                        <span class="comment">// 注意：file.getName()前面需要带上父文件夹的名字加一斜杠,</span></span><br><span class="line">                        <span class="comment">// 不然最后压缩包中就不能保留原来的文件结构,即：所有文件都跑到压缩包根目录下了</span></span><br><span class="line">                        compress(file, zos, name + <span class="string">&quot;/&quot;</span> + file.getName(),keepDirStructure);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        compress(file, zos, file.getName(),keepDirStructure);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法2：压缩多个文件</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 压缩成ZIP 压缩多个文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> srcFiles 需要压缩的文件列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> out           压缩文件输出流</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> RuntimeException 压缩失败会抛出运行时异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">toZip</span><span class="params">(List&lt;File&gt; srcFiles , OutputStream out)</span><span class="keyword">throws</span> RuntimeException </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">try</span> (ZipOutputStream zos = <span class="keyword">new</span> ZipOutputStream(out))&#123;</span><br><span class="line">        <span class="keyword">for</span> (File srcFile : srcFiles) &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[BUFFER_SIZE];</span><br><span class="line">            zos.putNextEntry(<span class="keyword">new</span> ZipEntry(srcFile.getName()));</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            FileInputStream in = <span class="keyword">new</span> FileInputStream(srcFile);</span><br><span class="line">            <span class="keyword">while</span> ((len = in.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                zos.write(buf, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            zos.closeEntry();</span><br><span class="line">            in.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;压缩完成，耗时：&quot;</span> + (end - start) +<span class="string">&quot; ms&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;zip error from ZipUtils&quot;</span>,e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Apache commons也提供了压缩zip文件的方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">toZip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       ZipArchiveEntry zipArchiveEntry = <span class="keyword">new</span> ZipArchiveEntry(<span class="string">&quot;压缩zip&quot;</span>);</span><br><span class="line">       File file = <span class="keyword">new</span> File(<span class="string">&quot;G:\\test1.txt&quot;</span>);</span><br><span class="line">       <span class="keyword">try</span> (FileInputStream inputStream = <span class="keyword">new</span> FileInputStream(file)) &#123;</span><br><span class="line">           File zipFile = <span class="keyword">new</span> File(<span class="string">&quot;G:\\test1.zip&quot;</span>);</span><br><span class="line">           ZipArchiveOutputStream zipArchiveOutputStream = <span class="keyword">new</span> ZipArchiveOutputStream(zipFile);</span><br><span class="line">           zipArchiveOutputStream.putArchiveEntry(zipArchiveEntry);</span><br><span class="line">           <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">           <span class="keyword">int</span> len;</span><br><span class="line">           <span class="keyword">while</span> ((len = inputStream.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">               zipArchiveOutputStream.write(len);</span><br><span class="line">           &#125;</span><br><span class="line">           zipArchiveOutputStream.closeArchiveEntry();</span><br><span class="line">           zipArchiveOutputStream.close();</span><br><span class="line"></span><br><span class="line">       &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>既然有压缩文件，那么必然需要解压</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解压Zip文件</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> zipFile</span></span><br><span class="line"><span class="comment"> *            需要解压的zip文件位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destDir</span></span><br><span class="line"><span class="comment"> *            解压的目标位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unzip</span><span class="params">(String zipFile, String destDir)</span> </span>&#123;</span><br><span class="line">    File f;</span><br><span class="line">    <span class="keyword">try</span> (ArchiveInputStream i = <span class="keyword">new</span> ArchiveStreamFactory().createArchiveInputStream(ArchiveStreamFactory.ZIP,</span><br><span class="line">            Files.newInputStream(Paths.get(zipFile)))) &#123;</span><br><span class="line">        ArchiveEntry entry ;</span><br><span class="line">        <span class="keyword">while</span> ((entry = i.getNextEntry()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!i.canReadEntryData(entry)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            f = <span class="keyword">new</span> File(destDir, entry.getName());</span><br><span class="line">            <span class="keyword">if</span> (entry.isDirectory()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!f.isDirectory() &amp;&amp; !f.mkdirs()) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;failed to create directory &quot;</span> + f);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                File parent = f.getParentFile();</span><br><span class="line">                <span class="keyword">if</span> (!parent.isDirectory() &amp;&amp; !parent.mkdirs()) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;failed to create directory &quot;</span> + parent);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> (OutputStream o = Files.newOutputStream(f.toPath())) &#123;</span><br><span class="line">                    IOUtils.copy(i, o);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException | ArchiveException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 秒表</span></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.StopWatch;</span><br><span class="line">StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">stopWatch.start();</span><br><span class="line">stopWatch.getTime();</span><br><span class="line">stopWatch.stop();</span><br><span class="line"></span><br><span class="line"><span class="comment">//spring 获取方法参数名称</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.ParameterNameDiscoverer;</span><br><span class="line">ParameterNameDiscoverer parameterNameDiscoverer = <span class="keyword">new</span> LocalVariableTableParameterNameDiscoverer();</span><br><span class="line">String[] parameterNames = parameterNameDiscoverer.getParameterNames(method);</span><br><span class="line"></span><br><span class="line"><span class="comment">//spring 用于处理逗号分隔符的字符串列表方法</span></span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line">String [] StringUtils.tokenizeToStringArray(String str, String delimiters);</span><br></pre></td></tr></table></figure>



<h2 id="Httpclient与RestTemplate的比较"><a href="#Httpclient与RestTemplate的比较" class="headerlink" title="Httpclient与RestTemplate的比较"></a>Httpclient与RestTemplate的比较</h2><p>（一）HttpClient 客户端</p>
<p>1、HttpClient 是 apache 的开源，需要引入两个包：httpclient-4.2.4.jar 和 httpcore-4.2.2.jar。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HttpClien 的客户端访问</span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">httpClientVisit</span><span class="params">()</span> </span>&#123; </span><br><span class="line">   </span><br><span class="line">    String clientResponse = <span class="string">&quot;&quot;</span>; </span><br><span class="line">    <span class="keyword">try</span> &#123; </span><br><span class="line">   </span><br><span class="line">        HttpClient client = <span class="keyword">new</span> DefaultHttpClient(); </span><br><span class="line">        HttpPost request = <span class="keyword">new</span> HttpPost(mUrl); </span><br><span class="line">   </span><br><span class="line">        <span class="comment">//不是表单数据提交，这边使用 StringEntity 即可 </span></span><br><span class="line">        <span class="comment">//UrlEncodedFormEntity等都是 HttpEntity 接口的实现类 </span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> StringEntity(mRequestXml, <span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//编码 </span></span><br><span class="line">        entity.setContentType(<span class="string">&quot;text/xml&quot;</span>); </span><br><span class="line">        request.setEntity(entity); </span><br><span class="line">        <span class="comment">// 发送请求 </span></span><br><span class="line">        HttpResponse response = client.execute(request); </span><br><span class="line">   </span><br><span class="line">        org.apache.http.HttpEntity httpEntity = response.getEntity(); </span><br><span class="line">   </span><br><span class="line">        <span class="keyword">if</span> (httpEntity != <span class="keyword">null</span>) &#123; </span><br><span class="line">            <span class="comment">// EntityUtils.toString 如果不指定编码，EntityUtils默认会使用ISO_8859_1进行编码 </span></span><br><span class="line">            clientResponse = EntityUtils.toString(httpEntity, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            <span class="comment">// 记得设置编码或者如下 </span></span><br><span class="line">            <span class="comment">// clientResponse = new String(EntityUtils.toString(httpEntity).getBytes(&quot;ISO_8859_1&quot;), &quot;UTF-8&quot;); </span></span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span> (clientResponse == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(clientResponse)) &#123; </span><br><span class="line">            System.err.println(<span class="string">&quot;clientResponse is null or empty.&quot;</span>); </span><br><span class="line">        &#125; </span><br><span class="line">           System.out.println(clientResponse);    </span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123; </span><br><span class="line">        e.printStackTrace(); </span><br><span class="line">    &#125; </span><br><span class="line">   </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">wll</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wllshdx.github.io/2021/03/20/ApacheTools/">https://wllshdx.github.io/2021/03/20/ApacheTools/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wllshdx.github.io" target="_blank">wllblog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Apache%E5%B7%A5%E5%85%B7%E7%B1%BB/">Apache工具类</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Apache%E5%85%A8%E5%AE%B6%E6%A1%B6%E4%B8%8D%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97"><span class="toc-number">1.</span> <span class="toc-text">Apache全家桶不完全使用指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96"><span class="toc-number">1.1.</span> <span class="toc-text">依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commons-beanutils"><span class="toc-number">1.2.</span> <span class="toc-text">commons-beanutils</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BeanUtils"><span class="toc-number">1.2.1.</span> <span class="toc-text">BeanUtils</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commons-lang3"><span class="toc-number">1.3.</span> <span class="toc-text">commons-lang3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#StringUtils"><span class="toc-number">1.3.1.</span> <span class="toc-text">StringUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ArrayUtils"><span class="toc-number">1.3.2.</span> <span class="toc-text">ArrayUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DateFormatUtils"><span class="toc-number">1.3.3.</span> <span class="toc-text">DateFormatUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DateUtils"><span class="toc-number">1.3.4.</span> <span class="toc-text">DateUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NumberUtils"><span class="toc-number">1.3.5.</span> <span class="toc-text">NumberUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%BC%BA%E5%8F%8D%E5%B0%84%E5%A4%84%E7%90%86"><span class="toc-number">1.3.6.</span> <span class="toc-text">增强反射处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90"><span class="toc-number">1.3.7.</span> <span class="toc-text">随机数生成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commons-io"><span class="toc-number">1.4.</span> <span class="toc-text">commons-io</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FileUtils"><span class="toc-number">1.4.1.</span> <span class="toc-text">FileUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IOUtils"><span class="toc-number">1.4.2.</span> <span class="toc-text">IOUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FilenameUtils"><span class="toc-number">1.4.3.</span> <span class="toc-text">FilenameUtils</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commons-collections"><span class="toc-number">1.5.</span> <span class="toc-text">commons-collections</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CollectionUtils"><span class="toc-number">1.5.1.</span> <span class="toc-text">CollectionUtils</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#commons-codec"><span class="toc-number">1.6.</span> <span class="toc-text">commons-codec</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%A7%A3%E5%AF%86%E7%9B%B8%E5%85%B3"><span class="toc-number">1.6.1.</span> <span class="toc-text">加解密相关</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpClient"><span class="toc-number">1.7.</span> <span class="toc-text">HttpClient</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpURLConnection"><span class="toc-number">1.8.</span> <span class="toc-text">HttpURLConnection</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86"><span class="toc-number">1.9.</span> <span class="toc-text">加密</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Base64"><span class="toc-number">1.9.1.</span> <span class="toc-text">Base64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DigestUtils"><span class="toc-number">1.9.2.</span> <span class="toc-text">DigestUtils</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9zip"><span class="toc-number">1.10.</span> <span class="toc-text">文件压缩zip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-number">1.11.</span> <span class="toc-text">其它</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Httpclient%E4%B8%8ERestTemplate%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">1.12.</span> <span class="toc-text">Httpclient与RestTemplate的比较</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2021 By wll</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'bpSo4QoWKwBDQIPADEYTAiAd-gzGzoHsz',
      appKey: 'RBVQf3x0PAt06lcxhBhxOUkN',
      placeholder: '記得留下你的昵称和邮箱....可以快速收到回復',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '//i0.hdslb.com/bfs/emote/',
      emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可愛":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尷尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_恐吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"},
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'ba2e7aa3c28bc16a7519',
      clientSecret: '8680dc943f2f041fb09265e9186d67827a72a856',
      repo: 'hexo-wllblog-comment-gitalk',
      owner: 'wllshdx',
      admin: ['wllshdx'],
      id: '2479a1709019d030f85ba4681be09b30',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(d, w, c) {
    w.ChatraID = 'CwQnpMJms5hnEcLZT';
    var s = d.createElement('script');
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
    };
    s.async = true;
    s.src = 'https://call.chatra.io/chatra.js';
    if (d.head) d.head.appendChild(s);
})(document, window, 'Chatra');

if (true) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      Chatra('openChat')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      Chatra('hide')
    }
    function chatBtnShow () {
      Chatra('show')
    }
  }
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>